
 TYPE-POOLS: SLIS.
 
*INTERNAL TABEL.
 DATA: BEGIN OF GT_DATA OCCURS 0,
   LINE_COLOR(4),
   VBELN LIKE VBAK-VBELN,
   POSNR LIKE VBAP-POSNR,
   MATNR LIKE VBAP-MATNR,
     END OF GT_DATA.
 DATA: gs_data LIKE LINE OF gt_data,
	GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV WITH HEADER LINE,
	GS_LAYOUT TYPE SLIS_LAYOUT_ALV.
	GS_LAYOUT-INFO_FieldNAME = 'LINE_COLOR'.

 DEFINE FILL_FIELD_CATALOG.
   CLEAR GT_FIELDCAT.
   GT_FIELDCAT-FIELDNAME     = &1. "alan adı
   GT_FIELDCAT-REF_TABNAME   = &2. "referans tablo adı
   GT_FIELDCAT-REF_FIELDNAME = &3. "referans alan adı
   GT_FIELDCAT-DDICTXT       = &4. "default kolon genişliği, S:Kısa
   "M:Orta L:Uzun
   GT_FIELDCAT-SELTEXT_S     =     "kısa kolon adı
   GT_FIELDCAT-SELTEXT_M     =   "orta kolon adı
   GT_FIELDCAT-REPTEXT_DDIC  =   "varyant kısmında görünen metin
   GT_FIELDCAT-SELTEXT_L     =  &5. "uzun kolon adı
   append GT_FIELDCAT.
 FILL_FIELD_CATALOG  'VBELN' 'VBAK' 'VBELN' 'L' 'Siparis No'.
 FILL_FIELD_CATALOG  'POSNR' 'VBAP' 'POSNR' 'L' 'Kalem No'.
 FILL_FIELD_CATALOG  'MATNR' 'VBAP' 'MATNR' 'L' 'Malzeme'.

 SELECT
   VBAK~VBELN
   VBAP~POSNR
   VBAP~MATNR
INTO CORRESPONDING FIELDS OF TABLE GT_DATA FROM VBAK INNER JOIN VBAP
  ON VBAK~VBELN EQ VBAP~VBELN.

* Column color
   LOOP AT gt_data.
  GT_DATA-LINE_COLOR = 'C611'.
  MODIFY gt_data.
   ENDLOOP.
*Alv
 CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
   EXPORTING
     IS_LAYOUT     = GS_LAYOUT
     IT_FIELDCAT   = GT_FIELDCAT[]
   TABLES
     T_OUTTAB      = GT_DATA
   EXCEPTIONS
     PROGRAM_ERROR = 1
     OTHERS        = 2.
